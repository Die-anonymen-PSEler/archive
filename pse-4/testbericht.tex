\documentclass[parskip=full]{scrreprt}

\usepackage{helvet}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}
\inputencoding{utf8}
\usepackage{hyperref}
\usepackage{mathtools}
\usepackage[xindy]{imakeidx}
\makeindex
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{cleveref}
\usepackage[autostyle=true,german=quotes]{csquotes}
\renewcommand{\familydefault}{\sfdefault}
\begin{document}


\title{Implementierungsbericht: RetroMachines, \\ RetroFactory}
\author{Luca Becker, Henrike Hardt,\\Larissa Schmid, Adrian Schulte,\\Maik Wiesner}
\date{1. Dezember 2014}
\maketitle
\thispagestyle{empty}

\clearpage

\thispagestyle{empty}
\tableofcontents
\thispagestyle{empty}

\clearpage
\setcounter{page}{1}

\chapter{Einleitung}

\enquote{RetroMachines}

\chapter{Verbesserungen}

Die Qualitätssicherungsphase hat sich größtenteils auf die Verbesserung des Codes, das Testen des Codes, sowie die Optimierung der Auswertung der Lambda-Ausdrücke konzentriert. Hier konnten Signifikante Verbesserungen erzielt werden. Darüber hinaus konnten Verbesserungen an der Benutzeroberfläche des Spiels errungen werden.

\begin{description}
	\item[UI-Verbesserungen] Eine UI-Elemente haben eine Scroll-Funktion erhalten, was eine bessere Benutzung auf kleineren Displays erlaubt.
	\item[Erweiterung der Level] Es wurden weitere Level zum Spiel hinzugefügt, um dem Benutzer einen anhaltenden Spielspaß zu gewährleisten.
	\item[Profilsteuerung] Profile, die sich nur durch Groß- und Kleinschreibung unterschieden, sind nun nicht mehr möglich, um Verwirrung zu vermeiden.
	\item[Profilerstellung] Dem Benutzer werden nun Fehlermeldungen angezeigt, wenn die Erstellung eines Profils fehlschlägt beziehungsweise verwerht wird.
	\item[Scrollen] Das Scrollen in X-Richtung auf einigen UI-Elementen wurde deaktiviert.
\end{description}

\chapter{Codequalität}

Durch den Einsatz verschiedener Tools haben wir die Qualität unseres Codes weiter verbessern können.

\section{CodePro AnalytiX}

CodePro AnalytiX bietet einen großen Umfang an Möglichkeiten zur statischen Codeanalyse. Wir konnten damit vor allem unseren Codestyle an Konventionen der Java-Programmierung durch Umbenennen einzelner Attribute und Methoden sowie Abändern einzelner Abfragen anpassen. Darüber hinaus haben wir toten Code entfernt sowie doppelte Abläufe im Programm in neue Methoden ausgelagert.
Außerdem wurde uns so komfortabel angezeigt, an welchen Stellen wir unsere Dokumentation durch JavaDoc noch verbessern mussten. Dies war zum Teil bei neu hinzugefügten Methoden der Fall, aber auch, wenn sich die Aufrufparameter geändert hatten.

\section{FindBugs}

Auch FindBugs dient zur statischen Codeanalyse und sucht nach häufigen Fehlermustern in Programmen. Hierbei konnten wir noch ein paar Verbesserungen am Codestyle vornehmen, wirkliche Fehler gab es jedoch nicht. 

\section{Strukturierung}
Zur Übersichtlichkeit des Codes haben wir uns dazu entschieden den gesamten Code nach folgenden Regel zu sortieren: \newline
Im Allgemeinem gibt es die Reihenfolge "`abstract"', "`private"', "`protected"' und "`public"'. In Ausnahmefällen kann es zu Abweichungen kommen, zum Beispiel bei statischen Attributen oder Methoden:
\subsection{Attribute}
\begin{enumerate}
	\item[static final] (allgemeine Reihenfolge) 
	\item[static] (siehe Oben)
	\item[private]
	\item[protected]
	\item[pulic]
\end{enumerate}
\subsection{Methoden}
\begin{enumerate}
	\item[Konstruktoren] (in der oben gegebenen Reihenfolge)
	\item[abstract] (siehe Oben)
	\item[private] (static, normal)
	\item[protected] (static, overwritten, normal)
	\item[public] (static, overwritten, normal, getter and setter)
\end{enumerate}
\subsection{Subklassen}
Die Subklassen sind in der gleichen Reihenfolge aufgebaut wie normale Klassen.



\chapter{Unittests}

Wir verwenden jUnit-Tests um unsere Klassen einer Qualitätsprüfung zu unterziehen. Zum Ende der Qualitätssicherungsphase sind über 300 jUnit-Tests.

\chapter{Integrationstest}



\section{Controller}

Für die Überprüfung der fehlerlosen Zusammenarbeit der voneinander abhängigen Sys- temkomponenten wurde eine Reihe weiterer Testfälle geschrieben. Dazu gehören vor allem Tests, die mittels eines TestRunners eine Instanz des Spiels beziehen, da dieser die komplette Applikation in einem „headless“ Modus. Dazu wurde die libGDX hinreichend nachgebaut. Viele der Controller konnten so bereits in einer nahezu \enquote{realen} Umgebung getestet werden, u.a.

\begin{description}
	\item[ProfileController und SettingController] Es wurde sichergestellt, das der SettingController über einen Wechsel des Profils benachrichtigt wurde, und entsprechende Anpassungen vorgenommen wurden.
	\item[ProfileController und StatisticController] Es wurde sichergestellt, das der StatisticController über einen Wechsel des Profils benachrichtigt wurde, und entsprechende Anpassungen vorgenommen wurden.
\end{description}

\section{Spiel spielen}

Es wurden Integrationstests geschrieben, die das Zusammenspiel des GameControllers, RetroMan und der TiledMap sicherstellen.

\chapter{Überdeckung}

\begin{tabular} { | l | c | c | c | c | c | c | }
	\hline
	\textbf{Package} & \textbf{IC} & \textbf{BC} & \textbf{CI} & \textbf{MI} & \textbf{CB} & \textbf{MB} \\
	\hline
	Insgesamt & 81,3\% & 60\% & 11047 & 2547 & 420 & 270 \\
	\hline
	com.retroMachines \\
	\hline
	com.retroMachines.data & 100\% & 100\% & 205 & 0 & 6 & 0  \\
	\hline
	com.retroMachines.data.models & 100\% & 100\% & 603 & 0 & 16 & 0 \\
	\hline
	com.retroMachines.game \\
	\hline
	com.retroMachines.game.controllers \\
	\hline
	com.retroMachines.game.gameelements \\
	\hline
	com.retroMachines.ui & 100\% & 100\% & 323 & 0 & 8 & 0 \\
	\hline
	com.retroMachines.ui.screens & 100\% & 100\% & 51 & 0 & 0 & 0 \\
	\hline
	com.retroMachines.ui.screens.game \\
	\hline
	com.retroMachines.ui.screens.menus & 99\% & 85\% & 3965 & 50 & 41 & 7 \\
	\hline
	com.retroMachines.util \\
	\hline
	com.retroMachines.util.lambda \\
	\hline
\end{tabular}

Legende: \\
	IC = Instruction Coverage \\
	BC = Branch Coverage \\
	CI = Covered Instruction \\
	MI = Missed Instruction \\
	CB = Covered Branches \\
	MB = Missed Branches \\
	n/a: In diesem Fall macht eine Branchabdeckung keinen Sinn da keine Abzweigungen innerhalb des Packages existieren. \\

In dem mit dem Dokument mitgeschickten EclEmma Coverage Report sind diese Daten und mehr in einem interaktiven Format zusammengefasst. 
Er erlaubt die eingehende Betrachtung der Überdeckung und ermöglicht es, die Abdeckung in den einzelnen Paketen, Klassen und Methoden detailliert aufzulisten.

\chapter{Systemtests}

\chapter{Lasttests}

\section{Monkey Testing}

Wir haben unsere Gerät mehreren Monkey-Tests unterzogen. Dabei ist es zu keinerlei auffälligem Verhalten gekommen.

\chapter{Gefundene und behobene Bugs}

\section{Löschen des aktiven Profils}
\begin{description}
	\item[Fehlersymptom] Falls ein Benutzer das aktive Profil gelöscht hat und im Anschluss ein neues erstellt hat, so hat das neue Profil die Statistiken und Einstellungen des vorherigen Profils übernommen.
	\item[Fehlergrund] Die Einstellungen und Statistiken des Profils wurden nicht korrekt gelöscht.
	\item[Fehlerbehebung] Es wurden entsprechende Aufrufe an die \enquote{destroy} Methoden der jeweiligen Klassen eingefügt.
\end{description}

\section{Fehler beim Starten eines Levels}
\begin{description}
	\item[Fehlersymptom] Es war möglich das Spiel zu nutzen, obwohl dem Spieler noch Tutorialhinweise angezeigt wurden.
	\item[Fehlergrund] Das entsprechende Attribut, was eine Sperre der Interaktion bewirkt, wurde nicht gesetzt, wenn ein Tutorialhinweis angezeigt wird.
	\item[Fehlerbehebung] Das entsprechende Attribut wird nun gesetzt und auch beim Beenden der Tutorialhinweise entfernt.
\end{description}

\section{Erstellen von Profilen mit unterschiedlicher Groß- und Kleinschreibung}
\begin{description}
	\item[Fehlersymptom] Das Erstellen eines zweiten Profils, welches sich nur durch Groß- und Kleinschreibung von einem anderen Profils unterschied, war möglich.
	\item[Fehlergrund] Es war keine Überprüfung eines neuen Profilnamens auf diese Eigenschaft implementiert.
	\item[Fehlerbehebung] Die Überprüfung der Methode, die die Erstellung eines Profils erlaubt, wurde verbessert.
\end{description}

\chapter{Testwerkzeuge}

\section{EclEmma}

EclEmma erlaubte es uns die Codecoverage unseres Projekts zu überprüfen. Darüber hinaus verfügt dieses Tool über die Möglichkeit eines HTML-Exports.

\section{jUnit}

jUnit erlaubt das Testen einzelner Bestandteile unseres Codes. Außerdem waren wir durch jUnit in der Lage verschiedene Integrationstests auszuführen.

\end{document}